<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>S.Boonmeerit System</title>
<style>
body{
  font-family:"Segoe UI",sans-serif;
  background:#f4f6fb;
  margin:0;
}
header{
  background:#111;
  color:white;
  padding:15px;
  text-align:center;
}
.container{
  width:90%;
  max-width:1000px;
  margin:auto;
  padding:20px;
}
.card{
  background:white;
  padding:20px;
  border-radius:12px;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
  margin-top:20px;
}
h2{color:#111;}
input,button{
  padding:10px;
  margin:5px;
  border-radius:6px;
  border:1px solid #ccc;
}
button{
  background:black;
  color:white;
  border:none;
  cursor:pointer;
}
button:hover{background:#444;}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th{
  background:black;
  color:white;
  padding:8px;
}
td{
  border:1px solid #ddd;
  padding:8px;
  text-align:center;
}
.hidden{display:none;}
.search{
  width:60%;
}
.action-btn{background:#ff9800;}
.delete-btn{background:#f44336;}
.back-btn{background:#555;}
</style>
</head>
<body>

<header>
<h1>Welcome to S.Boonmeerit</h1>
</header>

<div class="container">

<!-- LOGIN -->
<div id="loginPage" class="card">
<h2>Login</h2>
<input id="user" placeholder="Username"><br>
<input id="pass" type="password" placeholder="Password"><br>
<button onclick="login()">Login</button>
<p id="msg"></p>
</div>

<!-- MENU -->
<div id="menuPage" class="card hidden">
<h2>welcome</h2>
<button onclick="showEmployee()">ข้อมูลพนักงาน</button>
<button onclick="showMaterial()">ข้อมูลวัสดุ</button><br><br>
<button onclick="logout()" class="back-btn">Logout</button>
</div>

<!-- EMPLOYEE -->
<div id="employeePage" class="card hidden">
<h2>ข้อมูลพนักงาน</h2>

<input class="search" id="searchEmp" placeholder="ค้นหาพนักงาน" onkeyup="renderEmployees()">

<h3>เพิ่ม / แก้ไข พนักงาน</h3>
<input id="empId" placeholder="รหัสพนักงาน">
<input id="empName" placeholder="ชื่อ-นามสกุล">
<button onclick="saveEmployee()">Save</button>

<table>
<thead>
<tr><th>รหัส</th><th>ชื่อ-นามสกุล</th><th>จัดการ</th></tr>
</thead>
<tbody id="empTable"></tbody>
</table>

<br>
<button onclick="backMenu()" class="back-btn">BACK</button>
</div>

<!-- MATERIAL -->
<div id="materialPage" class="card hidden">
<h2>ข้อมูลวัสดุ</h2>

<h3>เพิ่ม / แก้ไข วัสดุ</h3>
<input id="matName" placeholder="ชื่อวัสดุ">
<input id="matQty" placeholder="จำนวน">
<button onclick="saveMaterial()">Save</button>

<table>
<thead>
<tr><th>ชื่อวัสดุ</th><th>จำนวน</th><th>จัดการ</th></tr>
</thead>
<tbody id="matTable"></tbody>
</table>

<br>
<button onclick="backMenu()" class="back-btn">BACK</button>
</div>

</div>

<script>
// ===== LOGIN =====
function login(){
  let u=user.value,p=pass.value;
  if(u=="admin" && p=="1234"){
    loginPage.classList.add("hidden");
    menuPage.classList.remove("hidden");
  }else{
    msg.innerText="Username หรือ Password ไม่ถูกต้อง";
  }
}
function logout(){
  menuPage.classList.add("hidden");
  loginPage.classList.remove("hidden");
}

// ===== DATA STORAGE =====
let employees = JSON.parse(localStorage.getItem("employees")) || [
 {id:"600001",name:"นาย สุเวช ทิมศรีกล่ำ"},
 {id:"600002",name:"นาง พาเพลิน เทียนทอง"},
 {id:"600003",name:"นาย ช้วน จันทร์น่วม"}
];

let materials = JSON.parse(localStorage.getItem("materials")) || [
 {name:"ปูนซีเมนต์",qty:100},
 {name:"เหล็กเส้น",qty:200}
];

let editEmpIndex=-1;
let editMatIndex=-1;

// ===== MENU =====
function showEmployee(){
  menuPage.classList.add("hidden");
  employeePage.classList.remove("hidden");
  renderEmployees();
}
function showMaterial(){
  menuPage.classList.add("hidden");
  materialPage.classList.remove("hidden");
  renderMaterials();
}
function backMenu(){
  employeePage.classList.add("hidden");
  materialPage.classList.add("hidden");
  menuPage.classList.remove("hidden");
}

// ===== EMPLOYEE =====
function renderEmployees(){
  let keyword=searchEmp.value.toLowerCase();
  empTable.innerHTML="";
  employees.forEach((e,i)=>{
    if(e.id.includes(keyword)||e.name.toLowerCase().includes(keyword)){
      empTable.innerHTML+=`
      <tr>
        <td>${e.id}</td>
        <td>${e.name}</td>
        <td>
          <button class="action-btn" onclick="editEmployee(${i})">Edit</button>
          <button class="delete-btn" onclick="deleteEmployee(${i})">Delete</button>
        </td>
      </tr>`;
    }
  });
  localStorage.setItem("employees",JSON.stringify(employees));
}
function saveEmployee(){
  let id=empId.value,name=empName.value;
  if(id==""||name=="") return alert("กรอกข้อมูลให้ครบ");
  if(editEmpIndex==-1){
    employees.push({id,name});
  }else{
    employees[editEmpIndex]={id,name};
    editEmpIndex=-1;
  }
  empId.value="";empName.value="";
  renderEmployees();
}
function editEmployee(i){
  empId.value=employees[i].id;
  empName.value=employees[i].name;
  editEmpIndex=i;
}
function deleteEmployee(i){
  if(confirm("ลบพนักงาน?")){
    employees.splice(i,1);
    renderEmployees();
  }
}

// ===== MATERIAL =====
function renderMaterials(){
  matTable.innerHTML="";
  materials.forEach((m,i)=>{
    matTable.innerHTML+=`
    <tr>
      <td>${m.name}</td>
      <td>${m.qty}</td>
      <td>
        <button class="action-btn" onclick="editMaterial(${i})">Edit</button>
        <button class="delete-btn" onclick="deleteMaterial(${i})">Delete</button>
      </td>
    </tr>`;
  });
  localStorage.setItem("materials",JSON.stringify(materials));
}
function saveMaterial(){
  let name=matName.value,qty=matQty.value;
  if(name==""||qty=="") return alert("กรอกข้อมูลให้ครบ");
  if(editMatIndex==-1){
    materials.push({name,qty});
  }else{
    materials[editMatIndex]={name,qty};
    editMatIndex=-1;
  }
  matName.value="";matQty.value="";
  renderMaterials();
}
function editMaterial(i){
  matName.value=materials[i].name;
  matQty.value=materials[i].qty;
  editMatIndex=i;
}
function deleteMaterial(i){
  if(confirm("ลบวัสดุ?")){
    materials.splice(i,1);
    renderMaterials();
  }
}
</script>

</body>
</html>
